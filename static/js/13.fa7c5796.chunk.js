(this["webpackJsonpparts-and-service"]=this["webpackJsonpparts-and-service"]||[]).push([[13],{504:function(e,t,a){e.exports={empty:"styles_empty__2WkU1",label:"styles_label__35E0G"}},505:function(e,t,a){e.exports={root:"styles_root__27hGr",chat:"styles_chat__27ReD",message:"styles_message__3v--b",inner:"styles_inner__1LdyU",messageOwn:"styles_messageOwn__1fIqq",content:"styles_content__261Rf",head:"styles_head__3MU11",name:"styles_name__3JTOy",date:"styles_date__2C2Zl",chatText:"styles_chatText__1OPnC",chatImg:"styles_chatImg__36iZD",chatDoc:"styles_chatDoc__3XtnR",bottom:"styles_bottom__su_X0",field:"styles_field__2GBz2",send:"styles_send__1A2Ri",input:"styles_input__MOPOE"}},506:function(e,t,a){e.exports={root:"styles_root__3_9A_",left:"styles_left__hW1tr",tools:"styles_tools__MdeRX",tabs:"styles_tabs__1PbJG",tab:"styles_tab__3ISrF",tabActive:"styles_tabActive__3GyIK",new:"styles_new__14-j4",list:"styles_list__Yq2DC",item:"styles_item__2aqGi",title:"styles_title__1sQTL",itemActive:"styles_itemActive__2pOWk",itemTop:"styles_itemTop__26MJJ",date:"styles_date__kiqHs",resolved:"styles_resolved__1NX6P",author:"styles_author__3qkaj",type:"styles_type__J4y06",message:"styles_message__28XpG",right:"styles_right__3QuJG"}},551:function(e,t,a){"use strict";a.r(t),a.d(t,"Support",(function(){return q}));var n=a(2),s=a(22),c=a(0),l=a.n(c),r=a(10),i=a.n(r),o=a(254),m=a.n(o),u=a(14);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var f=l.a.createElement("rect",{y:3.5,width:8,height:2,fill:"#1E0E33"}),b=l.a.createElement("rect",{x:5,y:.5,width:8,height:2,transform:"rotate(90 5 0.5)",fill:"#1E0E33"}),v=function(e){var t=e.svgRef,a=e.title,n=d(e,["svgRef","title"]);return l.a.createElement("svg",_({width:8,height:9,viewBox:"0 0 8 9",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,f,b)},p=l.a.forwardRef((function(e,t){return l.a.createElement(v,_({svgRef:t},e))})),y=(a.p,a(261)),E=a(20),h=a(504),g=a.n(h),O=Object(c.memo)((function(e){var t=e.isManager,a=e.showCreateTicketPopup;return l.a.createElement("div",{className:g.a.empty},l.a.createElement("div",{className:g.a.label},l.a.createElement("div",{className:g.a.descr},"Select the chat on the left",t?".":","),!t&&l.a.createElement("div",{className:g.a.descrUser},"or ",l.a.createElement("button",{onClick:a},"Open new ticket"))))})),k=a(3),j=a.n(k),N=a(5),C=a(92);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var M=l.a.createElement("path",{d:"M15.0471 5.57248L2.13792 0.215914C1.59408 -0.00977394 0.979671 0.0895074 0.534514 0.474882C0.0893571 0.86032 -0.0968307 1.45419 0.0486696 2.02473L1.1977 6.53073H6.82353C7.0824 6.53073 7.29231 6.7406 7.29231 6.99951C7.29231 7.25838 7.08243 7.46829 6.82353 7.46829H1.1977L0.0486696 11.9743C-0.0968307 12.5448 0.0893258 13.1387 0.534514 13.5241C0.980578 13.9103 1.59505 14.0083 2.13795 13.7831L15.0472 8.42654C15.6349 8.18266 16 7.63585 16 6.99951C16 6.36316 15.6349 5.81632 15.0471 5.57248Z",fill:"white"}),x=function(e){var t=e.svgRef,a=e.title,n=T(e,["svgRef","title"]);return l.a.createElement("svg",w({width:16,height:14,viewBox:"0 0 16 14",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,M)},P=l.a.forwardRef((function(e,t){return l.a.createElement(x,w({svgRef:t},e))})),R=(a.p,a(18)),S=a(32),D=a(29),I=a(505),A=a.n(I),Y=Object(c.memo)((function(e){var t=e.activeTicket,a=e.userId,s=Object(R.a)({openTicket:S.i.openTicket,sendTicketMessage:S.i.sendTicketMessage}),r=Object(R.b)((function(e){return{ticket:D.i.getTicket(e)}})).ticket,o=r.data,u=r.isLoading,_=(r.isSendingMessage,r.id),d=o.messages,f=void 0===d?[]:d,b=Object(c.useRef)(null);Object(c.useEffect)((function(){s.openTicket(t)}),[s,t]);var v=Object(c.useCallback)(Object(N.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b||!b.current){e.next=4;break}return e.next=3,s.sendTicketMessage(_,{message:b.current.textContent});case 3:b.current.textContent="";case 4:case"end":return e.stop()}}),e)}))),[s]),p=Object(c.useCallback)((function(e){return e?e.map((function(e,t){var a=e.name,n=e.mime,s=e.link;return n.includes("image/")?l.a.createElement("div",{className:A.a.chatImg,key:n+t},l.a.createElement("img",{src:s,alt:a})):l.a.createElement("div",{className:A.a.chatDoc,key:n+t},l.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer"},a))})):null}),[]),y=Object(c.useMemo)((function(){return f.map((function(e){var t=e.text,s=e.files,c=e.author,r=void 0===c?{}:c,o=e.created,u=a===r.id,_=m()(o);return l.a.createElement("div",{key:o,className:i()(A.a.message,Object(n.a)({},A.a.messageOwn,u))},l.a.createElement("div",{className:A.a.inner},l.a.createElement("div",{className:A.a.head},l.a.createElement("div",{className:A.a.name},u?"You":r.name),l.a.createElement("div",{className:A.a.date},_.format("YYYY-MM-DD hh:mm"))),l.a.createElement("div",{className:A.a.content},l.a.createElement("div",{className:A.a.chatText},t),p(s))))}))}),[f,p,a]);return l.a.createElement("div",{className:A.a.root},l.a.createElement("div",{className:A.a.chat},y),l.a.createElement("div",{className:A.a.bottom},l.a.createElement("div",{className:A.a.field},l.a.createElement("div",{className:A.a.input,contentEditable:"true",ref:b}),l.a.createElement("button",{className:A.a.send,onClick:v},l.a.createElement(P,null)))),u&&l.a.createElement(C.a,null))})),L=a(506),G=a.n(L),J=[{key:"OPEN",name:"Open tickets"},{key:"CLOSED",name:"Closed tickets"}],q=Object(c.memo)((function(){var e=Object(c.useState)(J[0]),t=Object(s.a)(e,2),a=t[0],r=t[1],o=Object(c.useState)(null),_=Object(s.a)(o,2),d=_[0],f=_[1],b=Object(R.a)({showModal:S.d.showModal,closeTicket:S.i.closeTicket,loadTickets:S.i.loadTickets}),v=Object(R.b)((function(e){return{all:D.i.getAll(e),ticket:D.i.getTicket(e),isClosingTicket:D.i.getIsClosingTicket(e),isManager:D.j.getIsManager(e)}})),h=v.all,g=(v.isClosingTicket,v.isManager),k="854a312b-ae6a-4d2d-8224-d912a9ddb5a7-".concat(g?"manager":"user");Object(c.useEffect)((function(){b.loadTickets()}),[b]);var j=Object(c.useMemo)((function(){var e={OPEN:[],CLOSED:[]};return h.data.forEach((function(t){var a=t.status;"opened"===a&&e.OPEN.push(t),"closed"===a&&e.CLOSED.push(t)})),e}),[h]),N=Object(c.useMemo)((function(){return j[a.key]}),[j,a]),C=function(){b.showModal(u.b.CREATE_TICKET)},w=Object(c.useCallback)((function(e){f(e)}),[f]),T=Object(c.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation(),b.closeTicket(t)}),[b]),M=Object(c.useCallback)((function(e){r(e),f(null)}),[]),x=Object(c.useMemo)((function(){return J.map((function(e){return l.a.createElement("button",{key:e.key,onClick:function(){return M(e)},className:i()(G.a.tab,Object(n.a)({},G.a.tabActive,e.key===a.key))},e.name)}))}),[a,M]),P=Object(c.useMemo)((function(){return N.map((function(e,t){var a=e.subject,s=e.message,c=e.id,r=s.text,o=s.author,u=s.created,_=k===o.id,f=m()(u);return l.a.createElement("li",{className:i()(G.a.item,Object(n.a)({},G.a.itemActive,c===d)),key:c,onClick:function(){return w(c)}},l.a.createElement("div",{className:G.a.itemTop},l.a.createElement("div",{className:G.a.date},f.format("YYYY-MM-DD hh:mm")),g&&l.a.createElement("button",{className:G.a.resolved,onClick:function(e){return T(e,c)}},"Resolved")),l.a.createElement("div",{className:G.a.title},a),l.a.createElement("div",{className:G.a.author},l.a.createElement("span",{className:G.a.type},"Support:")," ",l.a.createElement("span",{className:G.a.name},"Alexander")),l.a.createElement("div",{className:G.a.message},_&&l.a.createElement("b",null,"You: "),r))}))}),[N,d,w,T,g,k]);return l.a.createElement(y.a,{pageTitle:"Support"},l.a.createElement("div",{className:G.a.root},l.a.createElement("div",{className:G.a.left},l.a.createElement("div",{className:G.a.tools},l.a.createElement("div",{className:G.a.tabs},x),!g&&l.a.createElement("div",{className:G.a.new},l.a.createElement(E.a,{text:l.a.createElement("span",{className:G.a.delete},l.a.createElement(p,{className:G.a.addIcon})," ",l.a.createElement("span",null,"Open new ticket")),skin:"yellow",size:"sm",disabled:!1,onClick:C}))),l.a.createElement("ul",{className:G.a.list},P)),l.a.createElement("div",{className:G.a.right},d?l.a.createElement(Y,{activeTicket:d,userId:k}):l.a.createElement(O,{showCreateTicketPopup:C,isManager:g}))))}));t.default=q}}]);
//# sourceMappingURL=13.fa7c5796.chunk.js.map